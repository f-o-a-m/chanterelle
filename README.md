# chanterelle

[![Build Status](https://travis-ci.org/f-o-a-m/chanterelle.svg?branch=master)](https://travis-ci.org/f-o-a-m/chanterelle)

<img src=https://github.com/f-o-a-m/purescript-web3/blob/master/purescript-web3-logo.png width="75">

_a build tool with example application_

## Build/Deploy Overview

This project is meant to be a replacement to `truffle`. You can use it for development, deployment and testing of solidity smart contracts in purescript. For the moment the workflow is dictated by the makefile. We also recommend [cliquebait](https://github.com/f-o-a-m/cliquebait) as a replacement for `testrpc`. 

### Build

In order to build the project, including all of the purescript files generated by purescript-web3-generator for each abi
the artifacts folder `build/contracts`, run

```bash
> make compile-contracts
```

This will compile any newly contracts including any existing contracts which have changed. It will also regenerate their 
corresponding purescript files, which means it will give you the benefit of type-errors when you have broken your existing application. Note that the solidity code will still compile, even if the purescript code doesn't.

### Deploy

Currently deployment is done via the `main` function in `src/Main.purs`. Your deploy script can be arbitrarily complicated,
using whatever purescript libraries and web3 calls you want. The deployment configuration for each contract (including 
the filepath for the build artifact and and necessary arguments for deployment) is kept in `src/ContractConfig.purs`.

When you are ready to deploy, you can run

```bash
> make deploy
```

You should see the logs from the deployment printed to the console, and the address for the recently deployed contract should
be written to the corresponding build artifact's "networks" object under the key corresponding to the network Id of the
network you were using. I.e., it follows `truffle`'s existing pattern.

### Test

You can write whatever tests you want in purescript to include in `test/Main.purs`. Each tests takes a global config
from the deployment as an argument passed from `main`. When you want to run the tests, run

```bash
> make test
```
